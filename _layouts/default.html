<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-FFK75SWM3H"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() { dataLayer.push(arguments); }
      gtag('js', new Date());
      gtag('config', 'G-FFK75SWM3H');
    </script>

    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />

    <!-- Dynamic Title -->
    <title>
      {% if page.title %}
        {{ page.title }} | {{ site.title }}
      {% else %}
        {{ site.title }}
      {% endif %}
    </title>

    <!-- Meta Description -->
    {% if page.description %}
      <meta name="description" content="{{ page.description | strip_html | escape }}" />
    {% elsif site.description %}
      <meta name="description" content="{{ site.description | strip_html | escape }}" />
    {% endif %}

    <link rel="icon" href="/assets/images/favicon.ico" type="image/x-icon" />

    <!-- Bootstrap CSS -->
    <link 
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" 
      rel="stylesheet" 
    />

    <!-- Site Styles -->
    <link rel="stylesheet" href="{{ '/assets/css/main.css' | relative_url }}" />

    {% seo %}
  </head>

  <body class="bg-info">
    <!-- Header -->
    <header>
      {% include header.html %}
    </header>

    <!-- Main Content -->
    <main>
      <div class="container">
        {{ content }}
      </div>
    </main>

    <!-- Footer -->
    {% include footer.html %}

    <!-- EmailJS -->
    <script src="https://cdn.emailjs.com/dist/email.min.js"></script>

    <!-- Bootstrap Bundle JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Custom JS -->
    <script src="{{ '/assets/js/main.js' | relative_url }}"></script>

    <script>
      // Initialize Bootstrap tooltips
      document.addEventListener('DOMContentLoaded', () => {
        const tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
        tooltipTriggerList.forEach(el => new bootstrap.Tooltip(el));

        // Fade-in on scroll using IntersectionObserver
        const faders = document.querySelectorAll('.fade-in');
        const options = { threshold: 0.1 };

        const appearOnScroll = new IntersectionObserver((entries, observer) => {
          entries.forEach(entry => {
            if (entry.isIntersecting) {
              entry.target.classList.add('visible');
              observer.unobserve(entry.target);
            }
          });
        }, options);

        faders.forEach(fader => appearOnScroll.observe(fader));
      });
    </script>
  </body>
</html>
